(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,n,t){"use strict";(function(e){var a,o,r,i,c,l,s,d=t(178),m=(t(179),t(265)(d)),u=t(266),f=[],p=32,h=new FileReader;function g(){(function(n){console.log(n);var t=e.from(n,"hex");console.log(t);for(var a=[],o="",r=0;"data"!=o;){var i=t.indexOf("\n");if(r++>1e3||-1===i)return Promise.reject("error reading header");o=t.toString("utf-8",0,i),a.push(o),t=t.slice(i+1)}if("#binvox"!=(o=a[0].slice(0,7)))return Promise.reject("first line reads ".concat(o," instead of #binvox"));var c,l,s,d=parseInt(a[0].slice(8),10);console.log("binvox version: "+d);for(var m=1;m<a.length-1;m++){if("dim"==(o=a[m]).slice(0,o.indexOf(" "))){i=(o=o.slice(o.indexOf(" ")+1)).indexOf(" ");c=parseInt(o.slice(0,i),10),i=(o=o.slice(i+1)).indexOf(" "),l=parseInt(o.slice(0,i),10),o=o.slice(i+1),s=parseInt(o,10);break}return Promise.reject("unrecognized keyword ".concat(o,", skipping"))}if(void 0===c)return void 0===l||void 0===s?Promise.reject("error reading header"):Promise.reject("missing dimensions in header");p=c,console.log("size: "+"(".concat(c,", ").concat(s,", ").concat(l,")")),u("#size").append("(".concat(c,", ").concat(s,", ").concat(l,")")),f=[];var h=0,g=(m=0,0),v=0,w=p;for(r=0;r<t.byteLength/2;r++){var y=t.readUInt8(2*r),E=t.readUInt8(2*r+1);if(1==y)for(var b=0;b<E;b++)v=h-(m=Math.floor(h/(w*w)))*w*w-(g=Math.floor((h-m*w*w)/w))*w,f.push([m,v,g]),h++;else h+=E}return t=null,Promise.resolve()})(h.result).then((function(){!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("plotting!"),i&&o.remove(i);(i=new d.GridHelper(10*p,p)).position.set(0,-5,0),i.material.color=new d.Color(0),i.material.opacity=.2,o.add(i),r.position.set(-20*p,7*p,20*p),c&&(o.remove(c),l.dispose(),s.dispose());l=new d.Geometry;var n=new d.Mesh(new d.BoxGeometry(10,10,10));console.time("loading time");var t={x:-5*(p-1),y:-5,z:-5*(p-1)},a=0,m=0,u=0;e&&(a=10*((v(f,"x")-w(f,"x"))/2-p/2),u=10*((v(f,"z")-w(f,"z"))/2-p/2));for(var h=0;h<f.length;h++){var g=t.x-a+10*f[h][0],y=t.y-m+10*f[h][1],E=t.z-u+10*f[h][2];n.position.set(g,y,E),l.mergeMesh(n)}s=new d.MeshPhongMaterial({color:6670458}),c=new d.Mesh(l,s),o.add(c),console.timeEnd("loading time"),n=null}(!1)})).catch((function(e){u("#size").remove(),u("#error").append('<div class="alert alert-danger" role="alert"> <strong>Error</strong>: '.concat(e,"</div>"))}))}function v(e,n){for(var t={x:0,y:1,z:2},a=e[0][t[n]],o=1;o<e.length;o++)e[o][t[n]]>a&&(a=e[o][t[n]]);return a}function w(e,n){for(var t={x:0,y:1,z:2},a=e[0][t[n]],o=1;o<e.length;o++)e[o][t[n]]<a&&(a=e[o][t[n]]);return a}function y(){requestAnimationFrame(y),a.render(o,r)}n.a=function(e){h.readAsArrayBuffer(e),a=new d.WebGLRenderer({alpha:!0,antialias:!0});var n=u("#3d-container").width(),t=u("#3d-container").height();a.setSize(n,t),a.setClearColor(new d.Color(16777215),0),u("#3d-container").append(a.domElement),o=new d.Scene,(r=new d.PerspectiveCamera(40,n/t,1,1e4)).position.set(-20*p,7*p,20*p),new m(r);var c=new d.AmbientLight(6316128);o.add(c);var l=new d.DirectionalLight(16777215);l.position.set(1,.75,.5).normalize(),o.add(l),(i=new d.GridHelper(10*p,p)).position.set(0,-5,0),i.material.color=new d.Color(0),i.material.opacity=.2,o.add(i),h.addEventListener("load",g,!1),y()}}).call(this,t(11).Buffer)},139:function(e,n,t){e.exports=t(268)},144:function(e,n,t){},145:function(e,n,t){},204:function(e,n){},206:function(e,n){},217:function(e,n){},218:function(e,n){},219:function(e,n){},246:function(e,n){},255:function(e,n){},257:function(e,n){},268:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(14),i=t.n(r),c=(t(144),t(113)),l=t(114),s=t(132),d=t(131),m=(t(145),t(302)),u=t(303),f=t(304),p=t(129),h=t.n(p),g=t(130),v=t(305),w=t(70),y=t.n(w),E=(t(267),t(128)),b=Object(g.a)({typography:{fontFamily:"'Montserrat', sans-serif"}}),x=function(e){Object(s.a)(t,e);var n=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o))).handleUploadClick=function(n){if(n.target.files.length<4)return 0;var t=[n.target.files[0],n.target.files[1],n.target.files[2],n.target.files[3]];console.log(t),e.setState({selectedFile:t,imageUploaded:1});var a=new FormData;t.forEach((function(e,n,t){a.append(n,e)})),e.setState({loading:!0}),y.a.post("/generateBinvox",a,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(a._boundary)}}).then((function(n){y.a.get("/generateBinvox",{responseType:"blob"}).then((function(n){[].push(n.data);var t=new Blob([n.data],{type:"application/octet-stream"});Object(E.a)(t),e.setState({loading:!1})}))})).catch((function(e){}))},e}return Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({imageUploaded:0,loading:!1})}},{key:"render",value:function(){return o.a.createElement(v.a,{theme:b},o.a.createElement("div",{className:"App"},o.a.createElement(m.a,{className:"App-header",container:!0},o.a.createElement(m.a,{item:!0,md:12},o.a.createElement(u.a,{variant:"h6"}," Please upload 4 images to generate 3D model.")),o.a.createElement(m.a,{item:!0,md:12},o.a.createElement("input",{accept:"image/*",id:"contained-button-file",multiple:!0,hidden:!0,type:"file",onChange:this.handleUploadClick}),o.a.createElement("label",{htmlFor:"contained-button-file"},o.a.createElement(f.a,{component:"span"},o.a.createElement(h.a,null)))),o.a.createElement(m.a,{item:!0,md:12},this.state.loading&&o.a.createElement(u.a,null,"Generating model...will take a while!!!! :)")),o.a.createElement(m.a,{item:!0,md:8},o.a.createElement("div",{id:"3d-container",style:{height:500,width:500}}),o.a.createElement("div",{id:"size"}),o.a.createElement("div",{id:"error"})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.22e97a5b.chunk.js.map